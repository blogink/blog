var titleTime,originTitle=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="w(ﾟДﾟ)w不要走啊！！！ "+originTitle,null!=titleTime&&clearTimeout(titleTime)):(document.title="ヾ(^▽^*)))欢迎回来！ "+originTitle,titleTime=setTimeout(function(){document.title=originTitle},2e3))}),function(){let e=!1;function t(){const t=document.getElementById("aside-content"),n=document.querySelector("#sidebar-menus .menus_items"),i=document.getElementById("aside-content-placeholder");if(!t||!n)return;const o=window.innerWidth<=768;if(o&&!e){const i=document.createElement("div");i.id="aside-content-placeholder",t.parentNode.insertBefore(i,t);const o=document.createElement("div");o.id="mobile-aside-wrapper",o.className="mobile-aside-wrapper",o.appendChild(t),n.parentNode.insertBefore(o,n.nextSibling),e=!0}else if(!o&&e&&i&&i.parentNode){const n=document.getElementById("mobile-aside-wrapper");n&&n.firstElementChild===t&&i.parentNode.replaceChild(t,i),e=!1}}let n;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.addEventListener("resize",()=>{clearTimeout(n),n=setTimeout(t,150)})}();var tasseles={changeMusicBg:function(e=!0){if("/music/"!==window.location.pathname)return console.log("非 music 页"),void cssConModuleOff();!function(){const e=document.getElementById("srMusic_bg"),t=document.getElementById("web_bg");if(!e){const e=document.createElement("div");e.id="srMusic_bg",e.style.transition="background-image 1s ease",t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)}}();const t=document.getElementById("srMusic_bg");if(e){const e=document.querySelector("#srMusic-page .aplayer-pic");t.style.backgroundImage=e.style.backgroundImage}else{const e=new MutationObserver(()=>{cssConModuleOn();const n=document.querySelector("#srMusic-page .aplayer-pic");if(console.info("已加载",t),n){e.disconnect(),t.style.backgroundImage=n.style.backgroundImage,tasseles.addEventListenerChangeMusicBg();const i=document.querySelector(".aplayerBgMusic");i&&(i.style.display="none",i.aplayer&&i.aplayer.pause())}});e.observe(document.querySelector("#srMusic-page"),{childList:!0,subtree:!0})}},addEventListenerChangeMusicBg:function(){console.log("检测到 music 页");const e=document.getElementById("srMusic-page");e.querySelector(".aplayer-info .aplayer-time .aplayer-icon-menu");e.querySelector("meting-js").aplayer.on("loadeddata",function(){tasseles.changeMusicBg(),console.info("player loadeddata")})}};function NavElementsAddon(){const e=document.querySelector("#nav > #menus > #search-button");if(!document.getElementById("spNavBtn")){const t=document.createElement("div");t.id="spNavBtn",t.type="button",t.title="控制面板",t.innerHTML='<span class="site-page social-icon dash"><i class="fas fa-gears"></i></span>',e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.addEventListener("click",function(){openPanel()})}}tasseles.changeMusicBg(!1),window.addEventListener("pjax:complete",NavElementsAddon),document.addEventListener("DOMContentLoaded",NavElementsAddon);